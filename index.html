<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ngô nhật trường</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap" rel="stylesheet">
</head>
<body>

    <div id="intro-screen">
        <img src="assets/home/logo-moc.png" alt="Ngô Nhật Trường Logo">
    </div>

    <div class="wrapper">
        <header class="header">
            <div class="brand">
                <div class="brand-logo">
                    <img src="assets/home/logo-moc.png" alt="ngô nhật trường calligraphy" class="logo-image">
                </div>
                <h1>ngô nhật trường</h1>
                <p class="tagline">người làm phim, làm vườn, viết và sắp đặt không gian.</p>
            </div>

            <nav class="navigation">
                <ul>
                    <li><a href="#home">trang chủ</a></li>
                    <li><a href="#about">về tôi</a></li>
                    <li><a href="#films">phim</a></li>
                    <li><a href="#music">nhạc</a></li>
                    <li><a href="#paintings">tranh</a></li>
                    <li><a href="#poets">thơ</a></li>
                    <li><a href="#artwork">artwork</a></li>
                    <li><a href="#space">không gian</a></li>
                    <li><a href="#blog">blog</a></li>
                    <li><a href="#contact">liên hệ</a></li>
                </ul>
            </nav>

            <div class="lang-switcher">
        <span class="lang-opt active" onclick="switchLanguage('en')">EN</span>
        <span class="separator">-</span>
        <span class="lang-opt" onclick="switchLanguage('vi')">VI</span>
        <span class="separator">-</span>
        <span class="lang-opt" onclick="switchLanguage('fr')">FR</span>
        </div>

        </header>

        <main class="content">
            <section id="home" class="section section-active">
                <div class="hero-slider">
                    <div class="slides-container">
                        <img src="assets/home/home-image/home-image-1.jpeg" class="slide active" alt="không gian 1">
                        <img src="assets/home/home-image/home-image-2.jpeg" class="slide" alt="không gian 2">
                    </div>
                    <button class="nav-btn prev" onclick="changeSlide(-1)">&#10094;</button>
                    <button class="nav-btn next" onclick="changeSlide(1)">&#10095;</button>
                </div>
                
                <div class="intro-text">
                    <p>Chào mừng bạn đến với góc nhỏ của Trường. Nơi lưu giữ những lát cắt của cuộc sống qua ống kính, nét vẽ và những khoảng lặng trong không gian sống.</p>
                </div>
            </section>

            <div id="dynamic-display"></div>
        </main>

        <footer class="footer">
            <p>© 2026 ngô nhật trường — lưu giữ từng hơi thở</p>
        </footer>
    </div>

    <script src="scripts/about.js"></script>
    <script src="scripts/films.js"></script>
    <script src="scripts/music.js"></script>
    <script src="scripts/painting.js"></script>
    <script src="scripts/poetry.js"></script>
    <script src="scripts/artwork.js"></script>
    <script src="scripts/spaces.js"></script>
    <script src="scripts/blog.js"></script>
    <script src="scripts/contact.js"></script>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <script>
        // --- 1. KHỞI TẠO BIẾN TOÀN CỤC ---
        let currentLang = 'vi';
        let currentSectionId = 'home'; 
        let currentFilmIndex = -1; // Biến nhớ: Đang xem phim số mấy (-1 là chưa xem)

        // --- 2. CẤU HÌNH DỮ LIỆU (DATA MAPPING) ---
        // Hàm lấy dữ liệu an toàn, tránh lỗi nếu file .js chưa tải
        function getSectionData(id) {
            try {
                if (id === 'about') return (typeof aboutData !== 'undefined') ? aboutData : null;
                if (id === 'films') return (typeof filmsData !== 'undefined') ? filmsData : null;
                if (id === 'music') return (typeof musicData !== 'undefined') ? musicData : null;
                if (id === 'paintings') return (typeof paintingsData !== 'undefined') ? paintingsData : null;
                if (id === 'poets') return (typeof poetryData !== 'undefined') ? poetryData : null;
                if (id === 'artwork') return (typeof artworkData !== 'undefined') ? artworkData : null;
                if (id === 'space') return (typeof spacesData !== 'undefined') ? spacesData : null;
                if (id === 'blog') return (typeof blogData !== 'undefined') ? blogData : null;
                if (id === 'contact') return (typeof contactData !== 'undefined') ? contactData : null;
            } catch (e) {
                console.error("Lỗi lấy dữ liệu:", e);
                return null;
            }
            return null;
        }

        // --- 3. KHỞI CHẠY KHI WEB TẢI XONG ---
        document.addEventListener('DOMContentLoaded', () => {
            // Xử lý màn hình chào
            const introScreen = document.getElementById('intro-screen');
            if (introScreen) {
                introScreen.addEventListener('click', function() {
                    this.classList.add('hidden');
                    setTimeout(() => { this.remove(); }, 1000); 
                });
            }
            // Khởi tạo ngôn ngữ và menu
            switchLanguage(currentLang);
            highlightMenu('home'); 
        });

        // --- 4. SLIDER (Trang chủ) ---
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');

        function changeSlide(direction) {
            if(slides.length === 0) return;
            slides[currentSlide].classList.remove('active');
            currentSlide += direction;
            if (currentSlide >= slides.length) currentSlide = 0;
            if (currentSlide < 0) currentSlide = slides.length - 1;
            slides[currentSlide].classList.add('active');
        }

        // --- 5. DỊCH THUẬT & MENU ---
        const uiTranslations = {
            'vi': {
                tagline: "người làm phim, làm vườn, viết và sắp đặt không gian.",
                menu: ["trang chủ", "về tôi", "phim", "nhạc", "tranh", "thơ", "artwork", "không gian", "blog", "liên hệ"],
                footer: "© 2026 ngô nhật trường — lưu giữ từng hơi thở",
                homeWelcome: "Chào mừng bạn đến với góc nhỏ của Trường. Nơi lưu giữ những lát cắt của cuộc sống qua ống kính, nét vẽ và những khoảng lặng trong không gian sống."
            },
            'en': {
                tagline: "filmmaker, gardener, writer and space curator.",
                menu: ["home", "about", "films", "music", "paintings", "poetry", "artwork", "spaces", "blog", "contact"],
                footer: "© 2026 ngo nhat truong — keeping every breath",
                homeWelcome: "Welcome to Truong's little corner. A place to keep slices of life through lenses, strokes, and moments of silence in living spaces."
            },
            'fr': {
                tagline: "cinéaste, jardinier, écrivain et curateur d'espace.",
                menu: ["accueil", "à propos", "films", "musique", "peintures", "poésie", "artwork", "espaces", "blog", "contact"],
                footer: "© 2026 ngo nhat truong — garder chaque souffle",
                homeWelcome: "Bienvenue dans le petit coin de Truong. Un lieu pour garder des tranches de vie à travers des objectifs, des traits et des moments de silence dans les espaces de vie."
            }
        };

        function switchLanguage(lang) {
            currentLang = lang;

            // Đổi màu nút ngôn ngữ
            document.querySelectorAll('.lang-opt').forEach(btn => {
                btn.classList.remove('active');
                if(btn.getAttribute('onclick') && btn.getAttribute('onclick').includes(`'${lang}'`)) {
                    btn.classList.add('active');
                }
            });

            // Dịch nội dung tĩnh
            const content = uiTranslations[lang];
            if (content) {
                const taglineEl = document.querySelector('.tagline');
                const footerEl = document.querySelector('.footer p');
                const homeIntroEl = document.querySelector('.intro-text p');

                if(taglineEl) taglineEl.textContent = content.tagline;
                if(footerEl) footerEl.textContent = content.footer;
                if(homeIntroEl) homeIntroEl.textContent = content.homeWelcome;

                // Dịch Menu
                const menuItems = document.querySelectorAll('.navigation a');
                menuItems.forEach((item, index) => {
                    if(content.menu[index]) {
                        item.textContent = content.menu[index];
                    }
                });
            }

            // Reload nội dung động (QUAN TRỌNG: Giữ lại trang đang xem)
            if (currentSectionId !== 'home') {
                const data = getSectionData(currentSectionId);
                if (data) renderDynamicPage(data);
            }
        }

        // --- 6. LOGIC CHUYỂN TRANG (NAVIGATION) ---
        const navLinks = document.querySelectorAll('.navigation a');
        const sections = document.querySelectorAll('.section');
        const dynamicDisplay = document.getElementById('dynamic-display');

        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault(); 
                const targetId = this.getAttribute('href').substring(1);
                
                // Nếu người dùng bấm sang mục khác, hoặc bấm lại vào nút "Phim" -> Reset về lưới
                if (currentSectionId !== targetId || targetId === 'films') {
                    currentFilmIndex = -1; // Reset trạng thái xem phim
                }
                
                currentSectionId = targetId;
                switchSection(targetId);
            });
        });

        function highlightMenu(targetId) {
            navLinks.forEach(link => {
                link.classList.remove('nav-active'); 
                if(link.getAttribute('href').substring(1) === targetId) {
                    link.classList.add('nav-active');
                }
            });
        }

        function switchSection(targetId) {
            highlightMenu(targetId);

            sections.forEach(sec => sec.classList.remove('section-active'));

            if (dynamicDisplay) {
                dynamicDisplay.innerHTML = '';
                dynamicDisplay.classList.remove('section-active');
            }

            const staticSection = document.getElementById(targetId);

            if (staticSection) {
                staticSection.classList.add('section-active');
            } else {
                const data = getSectionData(targetId);
                if (data) {
                    renderDynamicPage(data);
                    if (dynamicDisplay) {
                        dynamicDisplay.classList.add('section', 'section-active');
                    }
                }
            }
        }

        // --- 7. HÀM RENDER NỘI DUNG (CỐT LÕI) ---
        function renderDynamicPage(fullData) {
            if (!fullData || !dynamicDisplay) return;

            const data = fullData[currentLang]; 
            if (!data) return; 

            // TRƯỜNG HỢP A: DẠNG LƯỚI (PHIM)
            if (data.layout === 'grid') {
                let html = `
                    <div class="dynamic-content fade-in">
                        <h2>${data.title}</h2>
                        ${data.description ? `<p class="dynamic-desc">${data.description}</p>` : ''}
                        
                        <div id="grid-view" class="gallery-grid">
                `;
                
                if (data.items) {
                    data.items.forEach((item, index) => {
                        html += `
                            <div class="gallery-item" onclick="openFilmDetail(${index})">
                                <img src="${item.thumbnail}" alt="${item.title}">
                                <div class="gallery-title">${item.title}</div>
                            </div>
                        `;
                    });
                }

                html += `</div> <div id="detail-view"></div> </div>`;
                dynamicDisplay.innerHTML = html;
                
                // Cập nhật dữ liệu phim hiện tại vào biến window để dùng chung
                window.currentFilmData = data.items;

                // --- TÍNH NĂNG GIỮ TRẠNG THÁI ---
                // Nếu đang xem dở phim (currentFilmIndex != -1) -> Tự động mở lại phim đó
                if (currentFilmIndex !== -1) {
                    // Kiểm tra xem phim đó có tồn tại ở ngôn ngữ mới không (tránh lỗi array out of bounds)
                    if (window.currentFilmData && window.currentFilmData[currentFilmIndex]) {
                        // Mở lại phim (tham số false để không cuộn lên đầu trang)
                        openFilmDetail(currentFilmIndex, false); 
                    } else {
                        currentFilmIndex = -1; // Nếu không tìm thấy thì reset
                    }
                }
            } 
            
            // TRƯỜNG HỢP B: DẠNG DANH SÁCH THƯỜNG (About, Blog...)
            else {
                let descriptionHTML = data.description 
                    ? `<p class="dynamic-desc">${data.description}</p>` 
                    : '';

                let htmlContent = `
                    <div class="dynamic-content fade-in">
                        <h2>${data.title}</h2>
                        ${descriptionHTML}
                        <div class="items-list">
                `;

                if (data.items && data.items.length > 0) {
                    data.items.forEach(item => {
                        let headerHTML = '';
                        if (item.title || item.date) {
                            headerHTML = `
                                <div class="item-header">
                                    <span class="item-title">${item.title || ''}</span>
                                    ${item.date ? `<span class="item-date"> — ${item.date}</span>` : ''}
                                </div>`;
                        }
                        htmlContent += `
                            <div class="item-card">
                                ${headerHTML}
                                <div class="item-body">
                                    ${item.excerpt ? `<p><strong>${item.excerpt}</strong></p>` : ''}
                                    ${item.content ? `<div style="white-space: pre-line; margin-top:10px;">${item.content}</div>` : ''}
                                </div>
                            </div>
                        `;
                    });
                } else {
                    htmlContent += `<p><em>(Nội dung đang được cập nhật...)</em></p>`;
                }

                htmlContent += `</div></div>`;
                dynamicDisplay.innerHTML = htmlContent;
            }
        }

        // --- 8. HÀM MỞ CHI TIẾT PHIM (QUAN TRỌNG) ---
        function openFilmDetail(index, doScroll = true) {
            if (!window.currentFilmData || !window.currentFilmData[index]) return;

            // 1. Lưu lại vị trí phim đang xem
            currentFilmIndex = index;
            
            const film = window.currentFilmData[index];
            const gridView = document.getElementById('grid-view');
            const detailView = document.getElementById('detail-view');
            
            // 2. Ẩn lưới, hiện chi tiết
            if(gridView) gridView.style.display = 'none'; 
            
            // 3. Xử lý các phần tử con (Poster, Stills, BTS...)
            let posterHTML = '';
            if (film.poster) {
                posterHTML = `<div style="text-align: center; margin-bottom: 40px; margin-top: 20px;">
                        <img src="${film.poster}" style="max-width: 300px; width: 100%; height: auto; border-radius: 2px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);" onclick="openLightbox(this.src)" class="zoomable">
                    </div>`;
            }

            let stillsHTML = '';
            if (film.stills && film.stills.length > 0) {
                stillsHTML = `<div class="bts-section"><h3>Still</h3><div class="bts-grid">`;
                film.stills.forEach(img => {
                    stillsHTML += `<img src="${img}" loading="lazy" onclick="openLightbox(this.src)">`;
                });
                stillsHTML += `</div></div>`;
            }

            let btsHTML = '';
            if (film.bts && film.bts.length > 0) {
                btsHTML = `<div class="bts-section"><h3>Behind The Scene</h3><div class="bts-grid">`;
                film.bts.forEach(img => {
                    btsHTML += `<img src="${img}" loading="lazy" onclick="openLightbox(this.src)">`;
                });
                btsHTML += `</div></div>`;
            }

            let durationHTML = film.duration ? `<span class="meta-line"><strong>Duration:</strong> ${film.duration}</span>` : '';

            // 4. Render HTML
            detailView.innerHTML = `
                <div class="film-detail-view fade-in">
                    <a class="btn-back" onclick="closeFilmDetail()" href="javascript:void(0)">&#8592;</a>
                    
                    <h2>${film.title}</h2>
                    
                    <div class="film-meta">
                        <span class="meta-line"><strong>Genre:</strong> ${film.genre}</span>
                        <span class="meta-line"><strong>Year:</strong> ${film.year}</span>
                        ${durationHTML}
                    </div>

                    <div class="video-wrapper-limit">
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/${film.youtubeId}" frameborder="0" allowfullscreen></iframe>
                        </div>
                    </div>

                    ${posterHTML}
                    ${stillsHTML}

                    <div class="crew-section">
                        <h3>Crew</h3>
                        <ul class="crew-list">${film.crew}</ul>
                    </div>

                    ${btsHTML}
                    
                    <div style="height:50px"></div>
                </div>
            `;
            
            // 5. Gắn tính năng click xem ảnh phóng to
            const contentImages = detailView.querySelectorAll('img');
            contentImages.forEach(img => {
                if (!img.getAttribute('onclick')) {
                    img.setAttribute('onclick', 'openLightbox(this.src)');
                }
                img.style.cursor = 'zoom-in';
            });
            
            // 6. Cuộn lên đầu (Chỉ khi người dùng click, không cuộn khi đổi ngôn ngữ để đỡ chóng mặt)
            if (doScroll) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // --- 9. HÀM ĐÓNG CHI TIẾT (QUAY VỀ LƯỚI) ---
        function closeFilmDetail() {
            // QUAN TRỌNG: Reset biến nhớ để lần sau vào lại Phim sẽ thấy lưới
            currentFilmIndex = -1;

            const gridView = document.getElementById('grid-view');
            const detailView = document.getElementById('detail-view');

            if (detailView) detailView.innerHTML = ''; 
            if (gridView) {
                gridView.style.display = 'grid'; 
                // Cuộn nhẹ lên đầu lưới phim
                gridView.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // --- 10. LIGHTBOX (XEM ẢNH) ---
        function openLightbox(src) {
            const lightbox = document.getElementById('img-lightbox');
            const lbImg = document.getElementById('lightbox-img');
            
            if (lightbox && lbImg) {
                lbImg.src = src;
                lightbox.style.display = 'flex';
            }
        }

        function closeLightbox() {
            const lightbox = document.getElementById('img-lightbox');
            if (lightbox) {
                lightbox.style.display = 'none';
            }
        }
    </script>








<div id="img-lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="close-lightbox">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>






















</body>
</html>